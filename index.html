<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LeafGuard ‚Äì AI Plant Diagnosis</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:system-ui;background:#eef4ee;color:#1b3a1b}

header{background:#fff;padding:20px 30px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
.logo{font-size:1.8em;font-weight:bold;color:#2e7d32}

.hero{background:linear-gradient(135deg,#4CAF50,#2e7d32);color:#fff;padding:80px 20px;text-align:center}
.hero h1{font-size:2.6em}
.hero p{font-size:1.2em}

.container{max-width:900px;margin:-50px auto 80px;padding:0 20px}
.card{background:#fff;padding:40px;border-radius:20px;box-shadow:0 20px 50px rgba(76,175,80,.15)}

.upload-area{border:3px dashed #4CAF50;border-radius:15px;padding:50px;text-align:center;cursor:pointer;background:#f6fbf6}
.upload-area:hover{background:#eef7ee}
.upload-icon{font-size:4em;margin-bottom:15px}
#fileInput{display:none}

.preview{display:none;text-align:center;margin-top:20px}
.preview img{max-width:100%;max-height:300px;border-radius:15px;margin-bottom:10px}
.filename{font-size:.95em;color:#2e7d32;margin-bottom:10px}

button{margin-top:15px;padding:15px 45px;border-radius:50px;border:none;background:linear-gradient(135deg,#4CAF50,#2e7d32);color:#fff;font-size:1.1em;cursor:pointer}
button:disabled{opacity:.6;cursor:not-allowed}

.loading{display:none;text-align:center;margin-top:20px}
.result{display:none;margin-top:30px;padding:30px;background:#f1f8f4;border-radius:15px;border-left:5px solid #4CAF50}

pre{white-space:pre-wrap;line-height:1.7;font-size:1.05em}
</style>
</head>

<body>

<header><div class="logo">üåø LeafGuard</div></header>

<section class="hero">
<h1>Diagnosa Penyakit Tanaman</h1>
<p>Upload foto ‚Üí hasil AI langsung tampil</p>
</section>

<div class="container">
<div class="card">

<div class="upload-area" id="uploadArea">
<div class="upload-icon">üì∑</div>
<strong>Klik untuk upload gambar tanaman</strong>
<input type="file" id="fileInput" accept="image/*">
</div>

<div class="preview" id="preview">
<img id="imgPreview">
<div class="filename" id="filename"></div>
<button id="sendBtn">üî¨ Kirim ke AI</button>
</div>

<div class="loading" id="loading">
<p>‚è≥ AI sedang menganalisis...</p>
</div>

<div class="result" id="result">
<h2>‚úÖ Output AI</h2>
<pre id="resultText"></pre>
</div>

</div>
</div>

<script>
const uploadArea=document.getElementById("uploadArea");
const fileInput=document.getElementById("fileInput");
const preview=document.getElementById("preview");
const imgPreview=document.getElementById("imgPreview");
const filename=document.getElementById("filename");
const sendBtn=document.getElementById("sendBtn");
const loading=document.getElementById("loading");
const result=document.getElementById("result");
const resultText=document.getElementById("resultText");

uploadArea.onclick=()=>fileInput.click();

fileInput.onchange=()=>{
    const file=fileInput.files[0];
    if(!file)return;

    imgPreview.src=URL.createObjectURL(file);
    filename.textContent=file.name;

    uploadArea.style.display="none";
    preview.style.display="block";
};

sendBtn.onclick=async()=>{
    sendBtn.disabled=true;
    loading.style.display="block";
    result.style.display="none";

    const formData=new FormData();
    formData.append("data",fileInput.files[0]); // üî• WAJIB "data"

    try{
        const res=await fetch(
            "https://stanley3322.app.n8n.cloud/webhook-test/leaftguard",
            {method:"POST",body:formData}
        );

        const text=await res.text(); // üî• PLAINTEXT ONLY

        loading.style.display="none";
        result.style.display="block";
        resultText.textContent=text||"(Tidak ada output)";

    }catch(e){
        loading.style.display="none";
        result.style.display="block";
        resultText.textContent="‚ùå Error:\n"+e.message;
    }
};
</script>

</body>
</html>
